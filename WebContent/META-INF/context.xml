<?xml version="1.0" encoding="UTF-8"?>
<Context displayName="Biblivre 4" path="/biblivre4" crossContext="true">
	<!-- Supabase PostgreSQL Connection - DBCP2 compliant -->
	<Resource auth="Container" 
		driverClassName="org.postgresql.Driver" 
		factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
		logAbandoned="false" 
		removeAbandonedOnBorrow="true" 
		removeAbandonedTimeout="300" 
		maxTotal="20" 
		maxIdle="10" 
		minIdle="0"
		maxWaitMillis="30000" 
		username="postgres.ouobsvpkwqbzeeapcpgw" 
		password="OgirdoR!198500" 
		type="javax.sql.DataSource" 
		accessToUnderlyingConnectionAllowed="true" 
		name="jdbc/biblivre4" 
		testOnBorrow="true"
		testWhileIdle="true"
		timeBetweenEvictionRunsMillis="60000"
		numTestsPerEvictionRun="3"
		minEvictableIdleTimeMillis="300000"
		validationQuery="SELECT 1"
		validationQueryTimeout="5"
		url="jdbc:postgresql://aws-0-us-west-2.pooler.supabase.com:5432/postgres?sslmode=require"/>
	
	<!-- Backup connections (legacy - keep for migration purposes) -->
	<Resource auth="Container" 
		driverClassName="org.postgresql.Driver" 
		factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
		logAbandoned="false" 
		removeAbandonedOnBorrow="true" 
		removeAbandonedTimeout="300" 
		maxTotal="20" 
		maxIdle="10" 
		minIdle="0"
		maxWaitMillis="30000" 
		username="postgres.ouobsvpkwqbzeeapcpgw" 
		password="OgirdoR!198500" 
		type="javax.sql.DataSource" 
		accessToUnderlyingConnectionAllowed="true" 
		name="jdbc/biblivre3" 
		testOnBorrow="true"
		testWhileIdle="true"
		timeBetweenEvictionRunsMillis="60000"
		numTestsPerEvictionRun="3"
		minEvictableIdleTimeMillis="300000"
		validationQuery="SELECT 1"
		validationQueryTimeout="5"
		url="jdbc:postgresql://aws-0-us-west-2.pooler.supabase.com:5432/postgres?sslmode=require"/>
	
	<Resource auth="Container" 
		driverClassName="org.postgresql.Driver" 
		factory="org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory"
		logAbandoned="false" 
		removeAbandonedOnBorrow="true" 
		removeAbandonedTimeout="300" 
		maxTotal="20" 
		maxIdle="10" 
		minIdle="0"
		maxWaitMillis="30000" 
		username="postgres.ouobsvpkwqbzeeapcpgw" 
		password="OgirdoR!198500" 
		type="javax.sql.DataSource" 
		accessToUnderlyingConnectionAllowed="true" 
		name="jdbc/biblivre4_b3b_restore" 
		testOnBorrow="true"
		testWhileIdle="true"
		timeBetweenEvictionRunsMillis="60000"
		numTestsPerEvictionRun="3"
		minEvictableIdleTimeMillis="300000"
		validationQuery="SELECT 1"
		validationQueryTimeout="5"
		url="jdbc:postgresql://aws-0-us-west-2.pooler.supabase.com:5432/postgres?sslmode=require"/>
</Context>
