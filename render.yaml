services:
  # Web Service - Biblivre 5 (Java 21 + Spring 6.2.3 + Tomcat 10.1)
  - type: web
    name: biblivre5
    env: docker
    dockerfilePath: ./Dockerfile
    branch: appmod/java-upgrade-20251208185505
    plan: starter
    region: oregon
    autoDeploy: true
    dockerCommand: null
    
    # Variáveis de ambiente para conexão Supabase (Transaction Mode)
    envVars:
      - key: DB_HOST
        value: aws-0-us-west-2.pooler.supabase.com
      - key: DB_PORT
        value: 6543
      - key: DB_NAME
        value: postgres
      - key: DB_USER
        value: postgres.ouobsvpkwqbzeeapcpgw
      - key: DB_PASSWORD
        value: OgirdoR!198500
      - key: JAVA_OPTS
        value: -Xmx768m -Xms256m -Djava.security.egd=file:/dev/./urandom
    
    healthCheckPath: /
